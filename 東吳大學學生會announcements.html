<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英文-中文 文章顯示</title>
    <style>
        .hidden { 
            display: none; 
        }
        .highlight {
            color: #FF6347; /* Highlighted color for words in curly braces */
        }
        #b-article {
            margin-top: 20px;
        }
        .input-area, .output-area {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>英文-中文 文章查看</h1>

    <!-- 英文文章顯示區域 -->
    <div id="english-article" class="output-area">
        <h2>英文文章</h2>
        <!-- 這裡會顯示從 Google 試算表抓取的英文文章 -->
    </div>

    <!-- 輸入區域 -->
    <div class="input-area">
        <textarea id="english-input" rows="5" cols="80" placeholder="在這裡輸入英文文章..."></textarea>
        <button onclick="generateBArticle()">生成中文文章</button>
    </div>

    <!-- 中文文章顯示區域 -->
    <div id="b-article" class="output-area"></div>

    <script>
        const sheetId = '1cydBIHAlBOdWJzpI3o6stFUFNAOOGy5GIhpBlNRicKo'; // 請替換成你的 Google 試算表 ID
        const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv`;

        // 從 Google 試算表抓取資料並顯示英文文章
        function loadArticles() {
            fetch(url)
            .then(response => response.text()) // 解析為文本格式
            .then(data => {
                const rows = data.split('\n').slice(1); // 分割數據並移除標題行

                const englishArticleDiv = document.getElementById('english-article');
                englishArticleDiv.innerHTML = "<h2>英文文章</h2>"; // 顯示標題

                rows.forEach(row => {
                    const columns = row.split(',').map(col => col.replace(/"/g, '').trim()); // 清理數據
                    const englishText = columns[0]; // 英文文章內容

                    const englishParagraph = createParagraph(englishText);
                    englishArticleDiv.appendChild(englishParagraph);
                });
            })
            .catch(error => {
                console.error('載入文章時發生錯誤:', error);
                alert('無法載入文章，請查看控制台以獲取更多資訊');
            });
        }

        // 根據輸入的英文文章生成對應的中文文章
        function generateBArticle() {
            const inputText = document.getElementById('english-input').value;
            const outputDiv = document.getElementById('b-article');
            const chineseText = convertToChinese(inputText); // 將英文文章轉換為中文，這裡可以加入翻譯邏輯
            outputDiv.innerHTML = createParagraph(chineseText).innerHTML;
        }

        // 將每段文本處理成顯示格式
        function createParagraph(text) {
            const paragraph = document.createElement('p');
            const regex = /(\d+)\s?({.*?})/g; // 匹配數字和括號中的內容
            const formattedText = text.replace(regex, (match, number, curlyWord) => {
                return `<span class="hidden">${number}</span>${curlyWord ? `<span class="highlight">${curlyWord}</span>` : ''}`;
            });
            paragraph.innerHTML = formattedText;
            return paragraph;
        }

        // 這裡可以根據需要替換成真實的翻譯邏輯，目前是示範將英文單詞後加上 " 1"
        function convertToChinese(englishText) {
            return englishText.replace(/\b(\w+)\b/g, function(match) {
                return match + ' 1'; // 假設對應的中文是 "1"，可以根據實際需求更改
            });
        }

        // 頁面載入時抓取試算表中的文章
        loadArticles();
    </script>
</body>
</html>
