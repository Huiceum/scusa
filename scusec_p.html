<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>東吳大學選舉事務委員會</title>
    <link rel="stylesheet" href="style選舉_phone.css">
    <link rel="icon" href="" type="image/x-icon">

    <style>
        .form-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
        }

        .forms-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .form-card {
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
            border: 1px solid #eaeaea;
        }

        .form-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }

        .form-header {
            background: rgb(224, 227, 230);
            color: rgb(0, 0, 0);
            padding: 15px 20px;
        }

        .form-title {
            font-size: 20px;
            font-weight: bold;
            margin: 0;
        }

        .form-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .form-detail {
            font-size: 14px;
            color: rgb(171, 179, 191);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .form-detail h2 {
            font-size: 18px;
            color: rgb(255, 0, 0);
            font-weight: bold;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .deadline {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: #a20808;
            font-weight: bold;
        }

        .deadline-icon {
            margin-right: 5px;
        }

        .eligibility {
            margin-bottom: 20px;
            color: #333;
        }

        .countdown {
            text-align: center;
            font-size: 14px;
            margin-top: 10px;
            color: #272727;
            font-weight: bold;
        }

        .form-button {
            display: block;
            background: #272727;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 0;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: auto;
            width: 100%;
        }

        .form-button:hover {
            background: #000000;
        }

        .empty-state {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            color: #7f8c8d;
            font-size: 18px;
            margin-top: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.03);
            border: 1px solid #eaeaea;
        }

        .empty-icon {
            font-size: 50px;
            margin-bottom: 15px;
            color: #bdc3c7;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

/* 在中大螢幕上居中顯示單筆表單 */
@media (min-width: 601px) {
    .single-form {
        grid-template-columns: minmax(0, 400px) !important;
        justify-content: center;
    }

    .double-forms {
        grid-template-columns: repeat(2, minmax(0, 400px)) !important;
        justify-content: center;
    }
}

/* 保留原本的響應式設計 */
@media (max-width: 900px) {
    .forms-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 600px) {
    .forms-grid {
        grid-template-columns: 1fr;
    }
}
        












        /* 預設連結樣式 */
        a {
            color: rgb(0, 65, 97);
            text-decoration: none;
        }

        /* 滑鼠懸停時的樣式 */
        a:hover {
            color: rgb(255, 255, 255);
            text-decoration: underline;
        }
        .updateTime {
        bottom: 10px;
        font-size: 0.8em;
        color: #434553;
        
    }


        .calendar {
            width: 100%;
            padding: 20px;
            background-color: rgb(255, 255, 255);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            color: #1f1f1f;
            margin-bottom: 10px;

        }

        .events {
            width: 100%;
            padding: 20px;
            background-color: rgb(255, 255, 255);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            height: 200px;
            margin-bottom: 80px;

        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .nothing {

            height: 100px;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            text-align: center;
        }

        .calendar-day {
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .calendar-day:hover {
            background-color: #ffffff;
        }

        .highlight {
            background-color: #212121;
            color: rgb(227, 170, 0);
        }
        
        .events h2 {
            color: #2b2b2b;
        }

        .event-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .event-item {
            padding: 10px;
            margin: 5px 0;
            background-color: #2b2b2b;
            border-radius: 5px;
            color:rgb(255, 255, 255);
        }

        .event-item a {
            color: #c6a200;
            text-decoration: none;
        }

        .event-item a:hover {
            text-decoration: underline;
        }

        .hidden {
            display: none;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .weekday {
            padding: 5px;
            background-color: #d8d8d8;
        }
        .view-more-btn {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        background-color: #2b2b2b;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .view-more-btn:hover {
        background-color: #000000;
    }



/* 按鈕樣式 */
button {
    background-color: #1f1f1f;
    color: #f0f0f0;
    border: 2px solid #444;
    border-radius: 8px;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s, box-shadow 0.3s, transform 0.2s;
    position: relative;
    overflow: hidden;
}

button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(120deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0));
    transition: left 0.4s;
    z-index: 1;
}

button:hover::before {
    left: 100%;
}

button:hover {
    background-color: #333;
    box-shadow: 0 0 10px #666;
    transform: scale(1.05);
}

button:active {
    background-color: #555;
    box-shadow: 0 0 5px #444 inset;
    transform: scale(0.95);
}

/* 月份與年份文字樣式 */
#monthYear {
    font-size: 18px;
    font-weight: bold;
    padding: 0 15px;
    color: #d0d0d0;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
    transition: color 0.3s, text-shadow 0.3s;
}

#monthYear:hover {
    color: #f0f0f0;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
}

    </style>
</head>

<body>

    <div class="container">
        <!-- 漢堡選單按鈕 -->
        <div class="hamburger-menu" id="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <nav class="sidebar" id="sidebar">
            <div class="logo">
                <div class="site-name"></div>
            </div>
            <ul class="nav-links slide-up">
                <li>
                    <div class="main-menu" data-target="#submenu-1">東吳大學學生選舉委員會</div>
                    <ul class="submenu" id="submenu-1">
                        <li><a href="東吳大學學生選舉委員會_phone.html">東吳大學學生選舉委員會</a></li>
                    </ul>
                </li>
                <li>
                    <div class="main-menu" data-target="#submenu-2">東吳大學學生會</div>
                    <ul class="submenu" id="submenu-2">
                        <li><a href="東吳大學學生會main_phone.html">首頁</a></li>
                        <li><a href="東吳大學學生會introduction_phone.html">本會簡介</a></li>
                        <li><a href="東吳大學學生會financial-report_phone.html">財務報告</a></li>
                        <li><a href="東吳大學學生會about_phone.html">組織架構</a></li>
                        <li><a href="東吳大學學生會regulations_phone.html">法規彙編</a></li>
                        <li><a href="東吳大學學生會反映表單－公開phone.html">我要反映</a></li> 
                    </ul>
                </li>
                <li>
                    <div class="main-menu" data-target="#submenu-3">活動專區</div>
                    <ul class="submenu" id="submenu-3">
                        <li><a href="東吳大學學生會shop.html">特約商店</a></li>
                        <li><a href="東吳大學學生會會產租借phone.html">會產租借</a></li>
                        <li><a href="東吳大學學生會社團人資料轉銜.html">社幹登記</a></li>
                        <li><a href="東吳大學學生會學生資料轉銜.html">網路會員</a></li>

                    </ul>
                </li>
                <li>
                    <div class="main-menu" data-target="#submenu-4">學生議會</div>
                    <ul class="submenu" id="submenu-4">
                        <li><a href="東吳大學學生議會_phone.html">東吳大學學生議會</a></li>
                        <li><a href="東吳大學學生議會－會議資料_phone.html">東吳大學學生議會－會議資料</a></li>
                        <li><a href="東吳大學學生議會－議員對照表_phone.html">東吳大學學生議會－議員對照表</a></li>
                    </ul>
                </li>
                <li>
                    <div class="main-menu" data-target="#submenu-5">東吳大學學生仲裁法庭</div>
                    <ul class="submenu" id="submenu-5">
                        <li><a href="scu_studentcourt_p.html">東吳大學學生仲裁法庭</a></li>
                    </ul>
                </li>
            </ul>
        </nav>


        <div class="form-container">
            <div id="formsArea" class="loading">
                <p>載入中，請稍候...</p>
            </div>
        </div>


        
        <div class="main-content  slide-up">
            <div class="announcements slide-up">
                <div id="announcements-list">
                    <!-- 公告內容將自動載入 -->
                </div>
                <button id="view-more" class="view-more-btn">查看更多</button>
            </div>
                <!-- 更新時間將顯示在這裡 -->
            </div>

            <div class="calendar">
                <div class="calendar-header">
                    <button id="prevMonth">Prev</button>
                    <span id="monthYear"></span>
                    <button id="nextMonth">Next</button>
                </div>
                <div class="weekdays">
                    <div class="weekday">日</div>
                    <div class="weekday">一</div>
                    <div class="weekday">二</div>
                    <div class="weekday">三</div>
                    <div class="weekday">四</div>
                    <div class="weekday">五</div>
                    <div class="weekday">六</div>
                </div>
                <div class="calendar-days"></div>
            </div>
    
                <div class="events">
                    <h2>選務活動</h2>
                    <div id="eventsList" class="event-list"></div>
                </div>

                <div class="nothing">.</div>
        </div>
    </div>
    <div id="ball-container">
        <img id="ball" src="ball8.gif" alt="Ball">
        <button id="mobile-btn">開啟電腦版</button>


    
    <!-- JavaScript -->
    <script>
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const sidebar = document.getElementById('sidebar');
        const mainMenus = document.querySelectorAll('.main-menu');

        // 漢堡選單功能：顯示或隱藏側邊欄
        hamburgerMenu.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });

        // 點擊主選單顯示或隱藏副選單
        mainMenus.forEach(menu => {
            menu.addEventListener('click', function() {
                const targetSubmenu = document.querySelector(menu.getAttribute('data-target'));
                targetSubmenu.classList.toggle('show');
            });
        });
        // 當文檔加載完成後的事件
        document.addEventListener('DOMContentLoaded', function() {
            loadAnnouncements();
        });

 
        function loadAnnouncements() {
        const sheetId = '1gqn49ZfKbBaqwe-D5VqrBJ0n37AiVK1VHp_e-DlAiNo'; // 試算表 ID
        const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv`;

        fetch(url)
        .then(response => response.ok ? response.text() : Promise.reject('Network response was not ok'))
        .then(data => {
            const rows = data.split('\n').slice(1); // 分割行並移除標題行
            const announcementList = document.getElementById('announcements-list');
            const updateTime = document.getElementById('update-time');
            announcementList.innerHTML = ''; // 清空公告欄

            // 只顯示前三個公告
            rows.slice(0, 3).forEach((row) => {
                const columns = row.split(',').map(col => col.replace(/"/g, '').trim());
                const newAnnouncement = document.createElement('div');
                newAnnouncement.classList.add('announcement');

                // 假設第一列是標題，第二列是訊息，第三列是超連結
                newAnnouncement.innerHTML = `
                    <h2 class="title"><a href="${columns[2]}" class="link">${columns[0]}</a></h2>
                    <p class="message">${columns[1]}</p>
                    <p class="updateTime">發文時間：${columns[3]}</p>
                `;
                announcementList.appendChild(newAnnouncement);
            });
        })
        .catch(error => {
            console.error('Error loading announcements:', error);
            alert('無法載入公告，請查看控制台獲取更多資訊。');
        });
    }

    document.getElementById('view-more').addEventListener('click', () => {
        window.location.href = 'scuseca_p.html'; // 替換為實際的目標網址
    });

    document.addEventListener('DOMContentLoaded', loadAnnouncements);

        document.addEventListener('DOMContentLoaded', function() {
            const dropdownParent = document.querySelector('.dropdown-parent');
            const dropdownToggle = dropdownParent.querySelector('.dropdown-toggle');
            const dropdownContent = dropdownParent.querySelector('.dropdown-content');
            
            dropdownToggle.addEventListener('click', function() {
                dropdownParent.classList.toggle('active');
            });
        });


        const sheetId = '1r4WC3P2OPuamjoz3vSximkd2qi43FHoyQlhbInSHOv4'; // Your Google Sheets ID
    const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv`;

    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();
    let eventsData = {};

    // Load events from Google Sheets
    function loadEvents() {
    fetch(url)
        .then(response => response.ok ? response.text() : Promise.reject('Network response was not ok'))
        .then(data => {
            const rows = data.split('\n').slice(1); // 移除標題列並獲取資料
            eventsData = {};  // 重設 eventsData

            rows.forEach(row => {
                const [event, date, link, location, time] = row.split(',').map(col => col.replace(/"/g, '').trim());
                if (event && date) {
                    const eventDate = new Date(date);
                    const key = `${eventDate.getFullYear()}-${eventDate.getMonth()}-${eventDate.getDate()}`;
                    if (!eventsData[key]) eventsData[key] = [];
                    eventsData[key].push({ event, link, location, time });
                }
            });
            renderCalendar();
        })
        .catch(error => console.error('Error loading events:', error));
}


    // Render calendar for the current month
    function renderCalendar() {
    const daysContainer = document.querySelector('.calendar-days');
    const monthYearElement = document.getElementById('monthYear');
    const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
    const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);

    monthYearElement.textContent = `${firstDayOfMonth.toLocaleString('zh-TW', { month: 'long' })} ${currentYear}`;

    // 清空之前的內容
    daysContainer.innerHTML = '';

    // 添加空白的前置格
    for (let i = 0; i < firstDayOfMonth.getDay(); i++) {
        const emptyCell = document.createElement('div');
        daysContainer.appendChild(emptyCell);
    }

    // 添加日期格
    for (let day = 1; day <= lastDayOfMonth.getDate(); day++) {
        const dayCell = document.createElement('div');
        const dateKey = `${currentYear}-${currentMonth}-${day}`;
        dayCell.classList.add('calendar-day');
        dayCell.textContent = day;

        // 標註有行程的日期
        if (eventsData[dateKey]) {
            dayCell.classList.add('highlight');
        }

        // 所有日期都添加點擊事件
        dayCell.addEventListener('click', () => showEvents(dateKey));

        daysContainer.appendChild(dayCell);
    }
}


    // Show events for a specific date
    function showEvents(dateKey) {
    const eventsList = document.getElementById('eventsList');
    eventsList.innerHTML = ''; // 確保清空內容

    const eventsForDate = eventsData[dateKey] || []; // 取得該日期的行程

    if (eventsForDate.length === 0) {
        // 如果沒有行程，顯示「沒有行程」
        const noEventMessage = document.createElement('p');
        noEventMessage.textContent = '沒有行程';
        eventsList.appendChild(noEventMessage);
    } else {
        // 如果有行程，顯示所有行程資訊
        eventsForDate.forEach(event => {
            const eventItem = document.createElement('div');
            eventItem.classList.add('event-item');
            eventItem.innerHTML = `
                <p><strong>活動名稱：</strong><a href="${event.link}" target="_blank">${event.event}</a></p>
                <p><strong>地點：</strong>${event.location || '無地點資料'}</p>
                <p><strong>時間：</strong>${event.time || '無時間資料'}</p>
            `;
            eventsList.appendChild(eventItem);
        });
    }
}



    // Navigate to the previous month
    document.getElementById('prevMonth').addEventListener('click', () => {
        currentMonth--;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        }
        loadEvents();
    });

    // Navigate to the next month
    document.getElementById('nextMonth').addEventListener('click', () => {
        currentMonth++;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        loadEvents();
    });

    // Initialize the page
    loadEvents();


    

ball.addEventListener('click', () => {
  window.location.href = 'scusec.html';
});

document.getElementById('mobile-btn').addEventListener('click', () => {
  window.location.href = 'scusec.html';
});

                // 當文檔滑入視窗時，添加 'show' 類別以觸發動畫
                const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('show');
                }
            });
        });

        // 監視所有具有 slide-up 類別的元素
        document.querySelectorAll('.slide-up').forEach(element => {
            observer.observe(element);
        });






        document.addEventListener('DOMContentLoaded', function() {
    loadForms();
});

document.addEventListener('DOMContentLoaded', function() {
    loadForms();
    
    // 監聽窗口大小變化，重新調整布局
    window.addEventListener('resize', adjustLayout);
});





document.addEventListener('DOMContentLoaded', function() {
    loadForms();
    window.addEventListener('resize', adjustLayout);
});

function loadForms() {
    const sheetId = '1f7rgg-Ti1hwpQd7Y7RfoKcGwpdPLS2UEHAJEcWB97qA';
    const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv`;

    fetch(url)
        .then(response => response.ok ? response.text() : Promise.reject('Network response was not ok'))
        .then(data => {
            const rows = data.split('\n').slice(1); // 分割行並移除標題行
            const formsArea = document.getElementById('formsArea');
            formsArea.innerHTML = ''; // 清空載入訊息
            
            // 過濾出開啟中的表單
            const activeForms = rows.filter(row => {
                const columns = parseCSVRow(row);
                return columns.length >= 5 && columns[4].trim().toLowerCase() === '是';
            });

            if (activeForms.length === 0) {
                // 顯示沒有表單的狀態
                formsArea.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">📋</div>
                        <p>目前沒有選舉進行中</p>
                    </div>
                `;
                return;
            }

            // 創建表單網格
            const formsGrid = document.createElement('div');
            formsGrid.classList.add('forms-grid');
            formsGrid.id = 'forms-grid';
            
            activeForms.forEach(row => {
                const columns = parseCSVRow(row);
                const formName = columns[0] || '';
                const deadline = columns[1] || '';
                const eligibility = columns[2] || '';
                const formLink = columns[3] || '';
                const registrationCount = columns.length > 5 ? columns[5] : ''; // F欄目前報名組數
                
                // 創建表單卡片
                const formCard = createFormCard(formName, deadline, eligibility, formLink, registrationCount);
                formsGrid.appendChild(formCard);
            });
            
            formsArea.appendChild(formsGrid);
            
            // 根據窗口大小和項目數量調整布局
            adjustLayout();
            
            // 啟動倒數計時器
            startCountdowns();
        })
        .catch(error => {
            console.error('Error loading forms:', error);
            document.getElementById('formsArea').innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">⚠️</div>
                    <p>載入表單資料時發生錯誤</p>
                </div>
            `;
        });
}

function adjustLayout() {
    const formsGrid = document.getElementById('forms-grid');
    if (!formsGrid) return;
    
    const windowWidth = window.innerWidth;
    const itemCount = formsGrid.children.length;
    
    // 根據窗口寬度設置布局
    if (windowWidth <= 600) {
        // 手機版：一排一個
        formsGrid.style.gridTemplateColumns = "1fr";
    } else {
        // 電腦版：處理少於三筆的情況，使其居中
        if (itemCount === 1) {
            formsGrid.style.gridTemplateColumns = "1fr";
            formsGrid.style.maxWidth = "400px";
            formsGrid.style.margin = "0 auto";
        } else if (itemCount === 2) {
            formsGrid.style.gridTemplateColumns = "1fr 1fr";
            formsGrid.style.maxWidth = "800px";
            formsGrid.style.margin = "0 auto";
        } else {
            // 三筆或更多維持原本的布局
            formsGrid.style.gridTemplateColumns = "repeat(3, 1fr)";
            formsGrid.style.maxWidth = "100%";
            formsGrid.style.margin = "0";
        }
    }
}

function parseCSVRow(row) {
    const result = [];
    let inQuotes = false;
    let currentValue = '';
    
    for (let i = 0; i < row.length; i++) {
        const char = row[i];
        
        if (char === '"') {
            inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
            result.push(currentValue.trim());
            currentValue = '';
        } else {
            currentValue += char;
        }
    }
    
    // 添加最後一個值
    result.push(currentValue.trim());
    
    return result.map(value => {
        // 移除包裹的引號
        if (value.startsWith('"') && value.endsWith('"')) {
            return value.substring(1, value.length - 1);
        }
        return value;
    });
}

function createFormCard(formName, deadline, eligibility, formLink, registrationCount) {
    const card = document.createElement('div');
    card.classList.add('form-card');
    
    // 準備標題區
    let headerContent = `
        <div class="form-header">
            <h2 class="form-title">${formName}</h2>
        </div>
    `;
    
    // 準備內容區，根據資料是否為空來決定是否顯示對應的區塊
    let contentHtml = '<div class="form-content">';
    
    // 只有當截止日期存在時才顯示
    if (deadline && deadline.trim() !== '') {
        contentHtml += `
            <div class="deadline">
                <span class="deadline-icon"></span>
                報名截止日：${deadline}
            </div>
            <div class="countdown" data-deadline="${deadline}">
                計算剩餘時間中...
            </div>
        `;
    }
    
    // 只有當資格摘要存在時才顯示
    if (eligibility && eligibility.trim() !== '') {
        contentHtml += `
            <div class="eligibility form-detail">
                <strong>報名資格：</strong>${eligibility}
            </div>
        `;
    }
    
    // 只有當目前報名組數存在時才顯示
    if (registrationCount && registrationCount.trim() !== '') {
        contentHtml += `
            <div class="registration-count form-detail">
                <strong>目前報名組數：</strong><h2>${registrationCount}</h2>
            </div>
        `;
    }
    
    // 加入報名按鈕
    contentHtml += `
        <a href="${formLink}" target="_blank" class="form-button">立即報名</a>
    </div>`;
    
    card.innerHTML = headerContent + contentHtml;
    
    return card;
}

function startCountdowns() {
    const countdownElements = document.querySelectorAll('.countdown');
    
    countdownElements.forEach(element => {
        const deadline = element.getAttribute('data-deadline');
        updateCountdown(element, deadline);
        
        // 每小時更新一次倒數
        setInterval(() => {
            updateCountdown(element, deadline);
        }, 1000 * 60 * 60); // 每小時更新
    });
}

function updateCountdown(element, deadlineStr) {
    // 解析截止日期 (假設格式為 YYYY-MM-DD 或 YYYY/MM/DD)
    const deadlineParts = deadlineStr.split(/[-\/]/);
    
    if (deadlineParts.length !== 3) {
        element.textContent = '日期格式錯誤';
        return;
    }
    
    const year = parseInt(deadlineParts[0], 10);
    const month = parseInt(deadlineParts[1], 10) - 1; // 月份從0開始
    const day = parseInt(deadlineParts[2], 10);
    
    const deadlineDate = new Date(year, month, day, 23, 59, 59);
    const currentDate = new Date();
    
    // 計算剩餘天數
    const timeDifference = deadlineDate.getTime() - currentDate.getTime();
    const daysRemaining = Math.ceil(timeDifference / (1000 * 60 * 60 * 24));
    
    if (daysRemaining < 0) {
        element.textContent = '報名已截止';
        element.style.color = '#9e9e9e';
    } else if (daysRemaining === 0) {
        element.textContent = '今天截止！';
        element.style.color = '#f44336';
    } else {
        element.textContent = `距離截止還剩 ${daysRemaining} 天`;
    }
}
    </script>
</body>
</html>
